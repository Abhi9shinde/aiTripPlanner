import {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget. Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url and take correct Img URL from google, Geo Coordinates, ticket Pricing, Time t travel each of the location for 3 days with each day plan with best time to visit in JSON format.\\n",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'Okay, here\'s a comprehensive travel plan for a couple on a budget for 3 days in Las Vegas, in JSON format.  I\'ve focused on free or low-cost attractions and affordable accommodations.  Since I can\'t directly access live, up-to-the-minute pricing or booking information, *the hotel and ticket prices are estimates and you should verify them before booking.* Hotel prices are also highly dependent on the dates of your trip and can fluctuate significantly.\n\n```json\n{\n  "tripName": "Las Vegas Budget Getaway for Couples (3 Days)",\n  "budget": "Cheap",\n  "travelers": "Couple",\n  "location": "Las Vegas, Nevada",\n  "hotels": [\n    {\n      "hotelName": "Circus Circus Hotel & Casino",\n      "hotelAddress": "2880 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "price": 45,\n      "hotelImageUrl": "https://lh3.googleusercontent.com/p/AF1QipO9HhT734V-Y_Jv4n994J7r8i-2k0F7I5i-r_8w=s680-w680-h510",\n      "geoCoordinates": {\n        "latitude": 36.1367,\n        "longitude": -115.1649\n      },\n      "rating": 3.5,\n      "description": "A classic Vegas experience with affordable rooms and free circus acts. Features a large casino, multiple restaurants, and the Adventuredome Theme Park (additional cost)."\n    },\n    {\n      "hotelName": "Stratosphere Hotel, Casino & Tower",\n      "hotelAddress": "2000 S Las Vegas Blvd, Las Vegas, NV 89104",\n      "price": 50,\n      "hotelImageUrl": "https://lh3.googleusercontent.com/p/AF1QipM5b3kR1Vw2_VlI_sWl_iQc62h129oK9n-U18w=s680-w680-h510",\n      "geoCoordinates": {\n        "latitude": 36.1234,\n        "longitude": -115.1559\n      },\n      "rating": 3.5,\n      "description": "Offers great views from the Stratosphere Tower (ticketed attraction).  Rooms are generally budget-friendly.  Has a casino, restaurants, and thrill rides at the top of the tower."\n    },\n    {\n      "hotelName": "Excalibur Hotel & Casino",\n      "hotelAddress": "3850 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "price": 55,\n      "hotelImageUrl": "https://lh3.googleusercontent.com/p/AF1QipN_U5eGqC02J-9x0I4g_944p969sD49i2Q1J-4H=s680-w680-h510",\n      "geoCoordinates": {\n        "latitude": 36.0986,\n        "longitude": -115.1743\n      },\n      "rating": 4.0,\n      "description": "Themed after a medieval castle, Excalibur offers reasonably priced rooms and a fun atmosphere. Conveniently located on the south end of the Strip."\n    }\n  ],\n  "itinerary": {\n    "day1": {\n      "theme": "South Strip Exploration & Free Entertainment",\n      "bestTimeToVisit": "Afternoon/Evening",\n      "activities": [\n        {\n          "placeName": "Welcome to Las Vegas Sign",\n          "placeDetails": "Iconic sign for photo opportunities. Arrive early to avoid crowds.",\n          "placeImageUrl": "https://lh3.googleusercontent.com/p/AF1QipO49wB71rE0q-i5UoBqF35Fp6iR9q0Yv4U6dE5H=s680-w680-h510",\n          "geoCoordinates": {\n            "latitude": 36.0827,\n            "longitude": -115.1726\n          },\n          "ticketPricing": 0,\n          "travelTime": "Depends on hotel location.  Consider ride-sharing or the Deuce bus."\n        },\n        {\n          "placeName": "Bellagio Conservatory & Botanical Garden",\n          "placeDetails": "Stunning seasonal floral displays. Free to enter.",\n          "placeImageUrl": "https://lh3.googleusercontent.com/p/AF1QipP5u0p4oW8f_T0_LpQ0B7w3M6-I3I-mR9V2kQyS=s680-w680-h510",\n          "geoCoordinates": {\n            "latitude": 36.1127,\n            "longitude": -115.1764\n          },\n          "ticketPricing": 0,\n          "travelTime": "15-20 minutes by Deuce bus from the \'Welcome\' sign area, shorter if walking."\n        },\n        {\n          "placeName": "Bellagio Fountain Show",\n          "placeDetails": "Spectacular water show choreographed to music. Free. Runs frequently in the afternoon and evening.",\n          "placeImageUrl": "https://lh3.googleusercontent.com/p/AF1QipN6w5eYw7E4jN03r-l-5tFw60T2V4-Q2o_W8QeM=s680-w680-h510",\n          "geoCoordinates": {\n            "latitude": 36.1129,\n            "longitude": -115.1741\n          },\n          "ticketPricing": 0,\n          "travelTime": "Adjacent to the Conservatory. No travel time."\n        },\n        {\n          "placeName": "Walk the Strip",\n          "placeDetails": "Enjoy the sights and sounds, people-watching, and free attractions like the Volcano at the Mirage (check show times).",\n          "placeImageUrl": "https://lh3.googleusercontent.com/p/AF1QipMh1Yc_1v2i26eT_tB3M7d94Y61bLp6K0LzJ3n_=s680-w680-h510",\n          "geoCoordinates": {\n            "latitude": 36.1162,\n            "longitude": -115.1740\n          },\n          "ticketPricing": 0,\n          "travelTime": "Variable, depending on how much you want to walk. The Mirage is north of the Bellagio."\n        }\n      ]\n    },\n    "day2": {\n      "theme": "Downtown Las Vegas (Fremont Street) & Budget Entertainment",\n      "bestTimeToVisit": "Evening",\n      "activities": [\n        {\n          "placeName": "Fremont Street Experience",\n          "placeDetails": "Light and sound show on a giant canopy. Free to enter.",\n          "placeImageUrl": "https://lh3.googleusercontent.com/p/AF1QipN-J6_Yf0YJ1fH4n6zX6Jj013r11xXl-gQjJt0P=s680-w680-h510",\n          "geoCoordinates": {\n            "latitude": 36.1703,\n            "longitude": -115.1421\n          },\n          "ticketPricing": 0,\n          "travelTime": "Take the Deuce bus (longer) or a ride-sharing service (faster, but more expensive) from the Strip. Allow 30-45 minutes travel time by bus.  Best to visit in the evening to see the Viva Vision light show."\n        },\n        {\n          "placeName": "SlotZilla Zip Line",\n          "placeDetails": "Zip line experience over Fremont Street.  Choose between upper and lower zip lines (prices vary).",\n          "placeImageUrl": "https://lh3.googleusercontent.com/p/AF1QipOLn0P803mN_K8sH-sN7N-5Kx6f8g2c1g6b2RzO=s680-w680-h510",\n          "geoCoordinates": {\n            "latitude": 36.1704,\n            "longitude": -115.1421\n          },\n          "ticketPricing": 49,\n          "travelTime": "Located on Fremont Street. No additional travel time once you\'re on Fremont Street."\n        },\n        {\n          "placeName": "Free Live Music on Fremont Street",\n          "placeDetails": "Several stages offer free live music throughout the evening.",\n          "placeImageUrl": "https://www.lasvegasadvisor.com/wp-content/uploads/2023/07/fremont-street-bands-las-vegas.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1703,\n            "longitude": -115.1421\n          },\n          "ticketPricing": 0,\n          "travelTime": "N/A - various locations along Fremont Street"\n        },\n        {\n          "placeName": "Heart Attack Grill",\n          "placeDetails": "Controversial restaurant, known for its extremely high-calorie menu and nurses themed waitresses.",\n          "placeImageUrl": "https://lh3.googleusercontent.com/p/AF1QipN-u7J1DqJc-dO-z0Bq4z8yq9j1r1e1-b7_2G-Q=s680-w680-h510",\n          "geoCoordinates": {\n            "latitude": 36.1714,\n            "longitude": -115.1411\n          },\n          "ticketPricing": 20,\n          "travelTime": "N/A - located on Fremont Street"\n        }\n      ]\n    },\n    "day3": {\n      "theme": "High Roller Observation Wheel & Ethel M Chocolate Factory",\n      "bestTimeToVisit": "Afternoon/Evening",\n      "activities": [\n        {\n          "placeName": "High Roller Observation Wheel",\n          "placeDetails": "Enjoy panoramic views of the Las Vegas Strip and surrounding area from this giant Ferris wheel.",\n          "placeImageUrl": "https://lh3.googleusercontent.com/p/AF1QipOM-u6B_b8h9J2m1B8x8gWvXGzC9y1X8tE69b-j=s680-w680-h510",\n          "geoCoordinates": {\n            "latitude": 36.1163,\n            "longitude": -115.1686\n          },\n          "ticketPricing": 25,\n          "travelTime": "The High Roller is located at the LINQ Promenade, which is easily accessible from the Strip.  Check for discounts online."\n        },\n        {\n          "placeName": "LINQ Promenade",\n          "placeDetails": "Outdoor shopping, dining, and entertainment district leading to the High Roller.",\n          "placeImageUrl": "https://lh3.googleusercontent.com/p/AF1QipNfE-nO3G3F2wJ7s9XyN_m9K-9k5L3U2jS45cE=s680-w680-h510",\n          "geoCoordinates": {\n            "latitude": 36.1164,\n            "longitude": -115.1692\n          },\n          "ticketPricing": 0,\n          "travelTime": "N/A - Located adjacent to the High Roller"\n        },\n        {\n          "placeName": "Ethel M Chocolate Factory and Cactus Garden",\n          "placeDetails": "Free chocolate factory tour and beautiful cactus garden. Located outside the Strip.",\n          "placeImageUrl": "https://lh3.googleusercontent.com/p/AF1QipP4qJ7-7Rz03L2HhR0J8oIu6R1iOqJg0gH5bC34=s680-w680-h510",\n          "geoCoordinates": {\n            "latitude": 36.0284,\n            "longitude": -115.0741\n          },\n          "ticketPricing": 0,\n          "travelTime": "Requires a car or ride-sharing.  Allow 20-30 minutes travel time from the Strip."\n        }\n      ]\n    }\n  },\n  "notes": [\n    "Consider purchasing a 3-day Deuce bus pass for affordable transportation on the Strip and to Downtown.",\n    "Look for free or discounted show tickets. Check websites like Vegas.com.",\n    "Take advantage of happy hour specials for cheaper drinks and appetizers.",\n    "Pack comfortable shoes, as you\'ll be doing a lot of walking.",\n    "Stay hydrated, especially during the hotter months.",\n    "Be aware of your surroundings and take precautions against pickpockets, especially in crowded areas."\n  ]\n}\n```\n\n**Important Considerations:**\n\n*   **Verify Prices:** Hotel and attraction prices can change dramatically.  Always check current prices on booking websites or the attraction\'s official website.\n*   **Transportation:**  The Deuce bus is the most budget-friendly way to get around, but it can be slow. Ride-sharing is faster but more expensive. Walking is a good option for shorter distances on the Strip.\n*   **Flexibility:** This is just a suggested itinerary. Feel free to adjust it based on your interests and energy levels.\n\nThis plan offers a mix of iconic Las Vegas experiences while keeping costs down.  Enjoy your trip!\n',
        },
      ],
    },
  ],
});
